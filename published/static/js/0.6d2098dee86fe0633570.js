webpackJsonp([0],{AxsP:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("Dd8w"),a=n.n(s),i=n("mvHQ"),o=n.n(i),r=n("Xxa5"),c=n.n(r),l=n("exGp"),m=n.n(l),p=n("H/Zg"),u=n("d+r2"),d=n("NYxO"),b=n("AezD"),f={name:"client-selector",components:{},data:function(){return{idClient:null,clients_by_company:[],companies:[],idCompany:null}},mounted:function(){var e=this;return m()(c.a.mark(function t(){var n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isCompany){t.next=10;break}return e.idCompany=e.currentUser.company_id,(n={}).idCompany=e.currentUser.company_id,n.isClient=e.isClient,n.isAdmin=e.isAdmin,n.isCompany=e.isCompany,t.next=9,e.consult(n,u.a.endPoints.urlClients,"post");case 9:e.clients_by_company=t.sent;case 10:if(!e.isAdmin){t.next=14;break}return t.next=13,e.consult({},u.a.endPoints.companies,"get");case 13:e.companies=t.sent;case 14:case"end":return t.stop()}},t,e)}))()},methods:{consult:function(e,t){var n=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"post";return m()(c.a.mark(function a(){var i;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,i=null,n.$store.commit(b.k,!0),"post"!==s){a.next=9;break}return a.next=6,p.a.post(e,t);case 6:i=a.sent,a.next=13;break;case 9:if("get"!==s){a.next=13;break}return a.next=12,p.a.getAll(t);case 12:i=a.sent;case 13:return n.$store.commit(b.k,!1),a.abrupt("return",i.data);case 17:a.prev=17,a.t0=a.catch(0),console.error(o()(a.t0.message)),n.$store.commit(b.j,a.t0.message),n.$store.commit(b.k,!1);case 22:case"end":return a.stop()}},a,n,[[0,17]])}))()},changeClient:function(e){this.$emit("client-selector:change",e)},changeCompany:function(e){var t=this;return m()(c.a.mark(function n(){var s;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==e){n.next=4;break}t.clients_by_company=[],n.next=12;break;case 4:return(s={}).idCompany=e,s.isClient=t.isClient,s.isAdmin=t.isAdmin,s.isCompany=t.isCompany,n.next=11,t.consult(s,u.a.endPoints.urlClients);case 11:t.clients_by_company=n.sent;case 12:case"end":return n.stop()}},n,t)}))()}},computed:a()({showSelector:function(){return!(!this.isAdmin&&!this.isCompany)}},Object(d.b)(["profile","isAdmin","isClient","currentUser","isCompany"]))},C=n("XyMi"),v=Object(C.a)(f,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-card",{attrs:{"no-body":!0}},[n("b-card-body",{directives:[{name:"show",rawName:"v-show",value:e.isAdmin,expression:"isAdmin"}],staticClass:"p-3 clearfix"},[n("b-row",[n("b-col",{staticClass:"text-center",attrs:{md:"1"}},[n("i",{staticClass:"fa icon-grid bg-dark text-white p-3 font-2xl mr-1 "})]),e._v(" "),n("b-col",{attrs:{md:"11"}},[n("div",{staticClass:"h5 text-dark mb-0 mt-2"},[n("b-form-group",{attrs:{label:e.$t("message.compania"),"label-for":"companyInput","label-cols":1,horizontal:!0}},[n("b-form-select",{attrs:{id:"companyInput",options:e.companies,required:"","value-field":"id","text-field":"name"},on:{change:e.changeCompany},model:{value:e.idCompany,callback:function(t){e.idCompany=t},expression:"idCompany"}},[n("template",{slot:"first"},[n("option",{domProps:{value:null}},[e._v(e._s(e.$t("message.seleccion_compania")))])])],2)],1)],1)])],1)],1),e._v(" "),n("b-card-body",{directives:[{name:"show",rawName:"v-show",value:e.showSelector,expression:"showSelector"}],staticClass:"p-3 clearfix"},[n("b-row",[n("b-col",{staticClass:"text-center",attrs:{md:"1"}},[n("i",{staticClass:"fa icon-user bg-dark text-white p-3 font-2xl mr-1 "})]),e._v(" "),n("b-col",{attrs:{md:"11"}},[n("div",{staticClass:"h5 text-dark mb-0 mt-2"},[n("b-form-group",{attrs:{label:e.$t("message.cliente"),"label-for":"clientInput","label-cols":1,horizontal:!0}},[n("b-form-select",{attrs:{id:"clientInput",options:e.clients_by_company,required:""},on:{change:e.changeClient},model:{value:e.idClient,callback:function(t){e.idClient=t},expression:"idClient"}},[n("template",{slot:"first"},[n("option",{domProps:{value:null}},[e._v(e._s(e.$t("message.seleccion_cliente")))])])],2)],1)],1)])],1)],1)],1)],1)},[],!1,null,null,null);t.default=v.exports}});
//# sourceMappingURL=0.6d2098dee86fe0633570.js.map