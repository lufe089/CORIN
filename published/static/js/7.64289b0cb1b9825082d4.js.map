{"version":3,"sources":["webpack:///src/views/ExportResults.vue","webpack:///./src/views/ExportResults.vue","webpack:///./src/views/ExportResults.vue?1ef8"],"names":["ExportResults","name","components","DownloadExcel","__webpack_require__","e","then","bind","clientSelector","data","exportFileNames","_BDData","idClient","idCompany","showInfoMessage","clients","json_fields_items","Pregunta_id","Descripción","Dimensión","Categoría","Componente","field","callback","value","json_fields_clients","Cliente","Identificación","Año de constitución","Número de empleados","Grupo coorporativo?","config","tc","Grupo familiar?","Número máximo de encuestas","Encuestas aplicadas","json_fields_responses","Respuesta","Participante_id","Email","Área","Directivo?","Cliente_id","Cliente_nombre","json_meta","key","mounted","_this","this","asyncToGenerator_default","regenerator_default","a","mark","_callee","dataConsult","_dataConsult","wrap","_context","prev","next","$store","commit","mutations_type","isClient","currentUser","client_id","company_id","isCompany","isAdmin","consult","endPoints","urlClients","sent","dispatch","actions_type","t0","message","stop","watch","computed","extends_default","Object","vuex_esm","methods","changeClientAnswers","path","_this2","method","arguments","length","undefined","_callee2","response","_context2","api","post","getAll","abrupt","console","error","stringify_default","exportItems","_this3","_callee3","items","_context3","urlActiveItems","exportClients","_this4","_callee4","dataToExport","_context4","exportResponses","_this5","_callee5","_context5","urlResponses","refresh","Component","component_normalizer","_vm","_h","$createElement","_c","_self","attrs","slot","md","_v","_s","$t","lg","directives","rawName","expression","header-tag","footer-tag","show","variant","staticClass","fluid","button","fetch","fields","href","options","companies","value-field","text-field","model","$$v","domProps","on","change","responses","__webpack_exports__"],"mappings":"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","file":"static/js/7.64289b0cb1b9825082d4.js","sourcesContent":["<template>\r\n  <b-card>\r\n    <div slot=\"header\">\r\n      <b-row >\r\n        <b-col md=\"12\">\r\n            <strong>{{ $t(\"message.download_data\") }}</strong>\r\n        </b-col>\r\n      </b-row>\r\n    </div>\r\n    <!-- Mensaje de informacion -->\r\n      <b-row md=\"12\">\r\n        <b-col lg=\"12\">\r\n            <b-card v-show=\"showInfoMessage\"\r\n                  header-tag=\"header\"\r\n                  footer-tag=\"footer\">\r\n                  <b-alert show variant=\"info\">\r\n                    <h4 class=\"alert-heading\">{{ $t(\"message.download_no_data_title\") }}</h4>\r\n                    <hr>\r\n                    <p>\r\n                      {{$t('message.download_no_data')}}\r\n                    </p>\r\n                  </b-alert>\r\n            </b-card>\r\n        </b-col>\r\n      </b-row>\r\n    <b-row fluid>\r\n      <!-- questions -->\r\n      <b-col md=\"12\" v-show=\"isAdmin\">\r\n        <b-list-group >\r\n          <b-list-group-item variant=\"secondary\"  class=\"d-flex justify-content-center\">  <div class=\"font-weight-bold font-lg\"> {{ $t(\"message.download_parametric_data\") }} </div></b-list-group-item>\r\n            <b-list-group-item button class=\"d-flex justify-content-between align-items-center\">\r\n              {{ $t(\"message.items\") }}\r\n              <download-excel :fetch= \"exportItems\"\r\n               :fields = \"json_fields_items\" :name= \"exportFileNames.items\">\r\n                <a href=\"#\"> <i class=\"fa fa-download fa-lg mt-4\"></i></a>\r\n              </download-excel>\r\n            </b-list-group-item>\r\n        </b-list-group>\r\n      </b-col>\r\n      <!-- lista de clientes -->\r\n      <b-col md=\"12\" v-show=\"isAdmin || isCompany\">\r\n        <b-list-group >\r\n          <b-list-group-item variant=\"secondary\"  class=\"d-flex justify-content-center\"><div class=\"font-weight-bold font-lg\"> {{ $t(\"message.download_clients\") }} </div></b-list-group-item>\r\n            <b-list-group-item button class=\"d-flex justify-content-between align-items-center\">\r\n              <b-input-group class=\"mb-12\" v-show=\"isAdmin\">\r\n                  <b-input-group-prepend>\r\n                    <b-input-group-text><i class=\"icon-grid\"></i></b-input-group-text>\r\n                  </b-input-group-prepend>\r\n                  <b-form-select v-model=\"idCompany\" :options=\"companies\"  value-field=\"id\" text-field=\"name\">\r\n                    <template slot=\"first\">\r\n                      <option :value=\"null\">{{$t('message.seleccion_compania')}}</option>\r\n                    </template>\r\n                  </b-form-select>\r\n              </b-input-group>\r\n              <!-- Cuando se seleccione para que empresa se van a descargar los clientes se habilita la opcion -->\r\n              <span v-show=\"idCompany != null\" class=\"mb-12\">\r\n                {{$t('message.clients')}}\r\n               <download-excel\r\n                  :fields = \"json_fields_clients\" :fetch= \"exportClients\" :name= \"exportFileNames.clients\">\r\n                  <a href=\"#\"> <i class=\"fa fa-download fa-lg mt-4\"></i></a>\r\n               </download-excel>\r\n              </span>\r\n            </b-list-group-item>\r\n        </b-list-group>\r\n      </b-col>\r\n    </b-row>\r\n    <!-- Results -->\r\n    <b-row fluid>\r\n      <b-col md=\"12\">\r\n        <b-list-group>\r\n          <b-list-group-item variant=\"secondary\"  class=\"d-flex justify-content-center\"><div class=\"font-weight-bold font-lg\"> {{ $t(\"message.download_answers_data\") }} </div>\r\n          </b-list-group-item>\r\n        </b-list-group>\r\n        <b-list-group>\r\n          <!-- Respuestas de un cliente particular seleccionado en la lista desplegable o del cliente autenticado -->\r\n          <b-list-group-item button class=\"d-flex justify-content-between align-items-center\">\r\n              <b-row>\r\n                <b-col  md=\"12\">\r\n                  <b-input-group v-show=\"isAdmin || isCompany\" class=\"mb-12\">\r\n                    <b-input-group-prepend>\r\n                      <b-input-group-text><i class=\"icon-grid\"></i></b-input-group-text>\r\n                    </b-input-group-prepend>\r\n                    <b-form-select v-model=\"idClient\" :options=\"clients\" value-field=\"id\" text-field=\"client_company_name\" @change=\"refresh\">\r\n                      <template slot=\"first\">\r\n                        <option :value=\"null\">{{$t('message.seleccion_cliente')}}</option>\r\n                      </template>\r\n                    </b-form-select>\r\n                  </b-input-group>\r\n                </b-col>\r\n                <b-col md=\"12\">\r\n                <div v-show=\"idClient != null\" >\r\n                  {{$t('message.download_answers_by_client_id')}}\r\n                  <download-excel :fetch=\"exportResponses\"\r\n                    :fields = \"json_fields_responses\" :name= \"exportFileNames.responses\">\r\n                    <a href=\"#\"> <i class=\"fa fa-download fa-lg mt-4\"></i></a>\r\n                  </download-excel>\r\n                </div>\r\n                </b-col>\r\n              </b-row>\r\n          </b-list-group-item>\r\n           <!-- Todas las respuestas para todos los clientes -->\r\n          <b-list-group-item button class=\"d-flex justify-content-between align-items-center\">\r\n              <span v-show=\"isAdmin\">\r\n              {{ $t(\"message.all\") }}\r\n              <download-excel :fetch=\"exportResponses\"\r\n                :fields = \"json_fields_responses\" :name= \"exportFileNames.responses\">\r\n                <a href=\"#\"> <i class=\"fa fa-download fa-lg mt-4\"></i></a>\r\n              </download-excel>\r\n              </span>\r\n          </b-list-group-item>\r\n        </b-list-group>\r\n      </b-col>\r\n    </b-row>\r\n  </b-card>\r\n</template>\r\n<script>\r\n\r\nimport BDData from '@/common/_BDData.js'\r\nimport { FETCH_COMPANIES } from '@/store/actions.type'\r\nimport api from '@/services/api.js'\r\nimport i18n from '@/lang/config'\r\nimport { mapGetters } from 'vuex'\r\nimport { SET_LOADING, SET_ERROR, CLEAR_ERRORS } from '@/store/mutations.type'\r\n\r\nexport default {\r\n  name: 'results-module',\r\n  components: {\r\n    DownloadExcel: () => import('vue-json-excel'),\r\n    clientSelector: () => import('@/components/BusinessLogic/ClientSelector')\r\n  },\r\n  data () {\r\n    return {\r\n      exportFileNames: BDData.exportFileNames,\r\n      idClient: null,\r\n      idCompany: null,\r\n      showInfoMessage: false, // controla si se muestra mensajes informativos\r\n      clients: [], // Para la lista desplegable del adminstrador y de la compañia\r\n      // urlClients: '/clients-and-survey-conf/',\r\n      /* json_fields: {\r\n        'Complete name': 'name',\r\n        'City': 'city',\r\n        'Telephone': 'phone.mobile',\r\n        'Telephone 2': {\r\n          field: 'phone.landline',\r\n          callback: (value) => {\r\n            return `Landline Phone - ${value}`\r\n          }\r\n        }\r\n      }, */\r\n      json_fields_items: {\r\n        'Pregunta_id': 'id',\r\n        'Descripción': 'name',\r\n        'Dimensión': 'item.dimension.name',\r\n        'Categoría': 'item.category.name',\r\n        'Componente': {\r\n          field: 'item.component',\r\n          callback: (value) => {\r\n            if (value === '') {\r\n              return '----'\r\n            } else {\r\n              return value.name\r\n            }\r\n          }\r\n        }\r\n      },\r\n      json_fields_clients: {\r\n        'Cliente': 'client_company_name',\r\n        'Identificación': 'identification',\r\n        'Año de constitución': 'constitution_year',\r\n        'Número de empleados': 'number_employees',\r\n        'Grupo coorporativo?': {\r\n          field: 'is_corporate_group',\r\n          callback: (value) => {\r\n            if (value === '') { // asi llega el false\r\n              return i18n.tc('message.no')\r\n            } else {\r\n              return i18n.tc('message.yes')\r\n            }\r\n          }},\r\n        'Grupo familiar?': {\r\n          field: 'is_family_company',\r\n          callback: (value) => {\r\n            if (value === '') { // asi llega el false\r\n              return i18n.tc('message.no')\r\n            } else {\r\n              return i18n.tc('message.yes')\r\n            }\r\n          }},\r\n        'Número máximo de encuestas': 'max_surveys',\r\n        'Encuestas aplicadas': 'used_surveys'\r\n      },\r\n      json_fields_responses: {\r\n        'Pregunta_id': 'pregunta_id',\r\n        'Respuesta': 'answer_numeric',\r\n        'Participante_id': 'participant_id',\r\n        'Email': 'participant_email',\r\n        'Área': 'area',\r\n        'Directivo?': {\r\n          field: 'is_directive',\r\n          callback: (value) => {\r\n            if (value === '') { // asi llega el false\r\n              return i18n.tc('message.no')\r\n            } else {\r\n              return i18n.tc('message.yes')\r\n            }\r\n          }},\r\n        'Cliente_id': 'client_id',\r\n        'Cliente_nombre': 'client_name'\r\n      },\r\n      json_meta: [\r\n        [\r\n          {\r\n            'key': 'charset',\r\n            'value': 'utf-8'\r\n          }\r\n        ]\r\n      ]\r\n    }\r\n  },\r\n  async mounted () {\r\n    this.$store.commit(CLEAR_ERRORS)\r\n    if (this.isClient) {\r\n      // Se inicializa el cliente a partir del cliente del usuario autenticado\r\n      this.idClient = this.currentUser.client_id\r\n      this.idCompany = this.currentUser.company_id //\r\n    } else if (this.isCompany) {\r\n      this.idCompany = this.currentUser.company_id\r\n      this.idClient = null // Se debe seleccionar de la lista desplegable\r\n      let dataConsult = {}\r\n      dataConsult.idCompany = this.currentUser.company_id\r\n      dataConsult.isClient = this.isClient // tomado del store\r\n      dataConsult.isAdmin = this.isAdmin // tomado del store\r\n      dataConsult.isCompany = this.isCompany // tomado del store\r\n      this.clients = await this.consult(dataConsult, BDData.endPoints.urlClients, 'post')\r\n    } else if (this.isAdmin) {\r\n      this.idCompany = null // Se deben seleccionar de la lista desplegable\r\n      this.idClient = null // Se deben seleccionar de la lista desplegable\r\n      // El id de la compania es null para que la consulta retorne todos los clientes\r\n      let dataConsult = {}\r\n      dataConsult.idCompany = this.idCompany\r\n      dataConsult.isClient = this.isClient // tomado del store\r\n      dataConsult.isAdmin = this.isAdmin // tomado del store\r\n      dataConsult.isCompany = this.isCompany // tomado del store\r\n      try {\r\n        await this.$store.dispatch(FETCH_COMPANIES)\r\n      } catch (exception) {\r\n        this.$store.commit(SET_ERROR, exception.message)\r\n        this.$store.commit(SET_LOADING, false)\r\n      }\r\n      this.clients = await this.consult(dataConsult, BDData.endPoints.urlClients, 'post')\r\n    }\r\n  },\r\n  watch: {\r\n  },\r\n  computed: {\r\n    ...mapGetters(['isAdmin', 'isCompany', 'isParticipant', 'isClient', 'hasErrors', 'currentUser', 'companies']) // Trae los getters\r\n  },\r\n  methods: {\r\n    changeClientAnswers: function (idClient) {\r\n      // Se actualiza el id del cliente que sirve para identificar para que cliente se descargarán los datos\r\n      this.idClient = this.currentUser.client_id\r\n      this.showInfoMessage = false\r\n    },\r\n    async consult (data, path, method = 'post') {\r\n      try {\r\n        this.showInfoMessage = false\r\n        var response = null\r\n        this.$store.commit(SET_LOADING, true)\r\n        if (method === 'post') {\r\n          response = await api.post(data, path)\r\n        } else if (method === 'get') {\r\n          response = await api.getAll(path)\r\n        }\r\n        // Estuvo exitosa la busqueda\r\n        this.$store.commit(SET_LOADING, false)\r\n        if (response.data.length === 0) {\r\n          // Se habilita la bandera para que muestre que no hay mensajes que descargar\r\n          this.showInfoMessage = true\r\n        }\r\n        return response.data\r\n      } catch (exception) {\r\n        console.error(JSON.stringify(exception.message))\r\n        this.$store.commit(SET_ERROR, exception.message)\r\n        this.$store.commit(SET_LOADING, false)\r\n      }\r\n    },\r\n    async exportItems () {\r\n      let items = await this.consult({}, BDData.endPoints.urlActiveItems, 'get')\r\n      return items\r\n    },\r\n    async exportClients () {\r\n      // Segun el perfil\r\n      let dataConsult = {}\r\n      if (this.isAdmin) {\r\n        // Para que se busquen todos los clientes de todas las companias\r\n        dataConsult.idCompany = null\r\n      } else if (this.isCompany) {\r\n        // La compania del usuario autenticado\r\n        dataConsult.idCompany = this.currentUser.company_id\r\n      }\r\n      dataConsult.isClient = this.isClient // tomado del store\r\n      dataConsult.isAdmin = this.isAdmin // tomado del store\r\n      dataConsult.isCompany = this.isCompany // tomado del store\r\n      var dataToExport = await this.consult(dataConsult, BDData.endPoints.urlClients)\r\n      return dataToExport\r\n    },\r\n    async exportResponses () {\r\n      // Controla las respuestas que se exportan segun los permisos y la peticion recibida\r\n      var dataConsult = {}\r\n      // el cliente seleccionado en la lista desplegable o el de la sesion configurado cuando se monta el componente\r\n      // puede ser null entonces se traerian todas las respuestas de todos los clientes\r\n      dataConsult.idClient = this.idClient\r\n      dataConsult.idCompany = this.idCompany\r\n      dataConsult.isClient = this.isClient // tomado del store\r\n      dataConsult.isAdmin = this.isAdmin // tomado del store\r\n      dataConsult.isCompany = this.isCompany // tomado del store\r\n      var dataToExport = await this.consult(dataConsult, BDData.endPoints.urlResponses)\r\n      if (dataToExport.length === 0) {\r\n        console.error('ningun resultado')\r\n        return [] // Lista vacia para que no hayan errores en el caso en el qe no hayan datos que exportar\r\n      } else {\r\n        return dataToExport\r\n      }\r\n    },\r\n    refresh: function () {\r\n      this.showInfoMessage = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/ExportResults.vue","/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ExportResults.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ExportResults.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1f106748\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ExportResults.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/ExportResults.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-card',[_c('div',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('b-row',[_c('b-col',{attrs:{\"md\":\"12\"}},[_c('strong',[_vm._v(_vm._s(_vm.$t(\"message.download_data\")))])])],1)],1),_vm._v(\" \"),_c('b-row',{attrs:{\"md\":\"12\"}},[_c('b-col',{attrs:{\"lg\":\"12\"}},[_c('b-card',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showInfoMessage),expression:\"showInfoMessage\"}],attrs:{\"header-tag\":\"header\",\"footer-tag\":\"footer\"}},[_c('b-alert',{attrs:{\"show\":\"\",\"variant\":\"info\"}},[_c('h4',{staticClass:\"alert-heading\"},[_vm._v(_vm._s(_vm.$t(\"message.download_no_data_title\")))]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('p',[_vm._v(\"\\n                    \"+_vm._s(_vm.$t('message.download_no_data'))+\"\\n                  \")])])],1)],1)],1),_vm._v(\" \"),_c('b-row',{attrs:{\"fluid\":\"\"}},[_c('b-col',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isAdmin),expression:\"isAdmin\"}],attrs:{\"md\":\"12\"}},[_c('b-list-group',[_c('b-list-group-item',{staticClass:\"d-flex justify-content-center\",attrs:{\"variant\":\"secondary\"}},[_c('div',{staticClass:\"font-weight-bold font-lg\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"message.download_parametric_data\"))+\" \")])]),_vm._v(\" \"),_c('b-list-group-item',{staticClass:\"d-flex justify-content-between align-items-center\",attrs:{\"button\":\"\"}},[_vm._v(\"\\n            \"+_vm._s(_vm.$t(\"message.items\"))+\"\\n            \"),_c('download-excel',{attrs:{\"fetch\":_vm.exportItems,\"fields\":_vm.json_fields_items,\"name\":_vm.exportFileNames.items}},[_c('a',{attrs:{\"href\":\"#\"}},[_c('i',{staticClass:\"fa fa-download fa-lg mt-4\"})])])],1)],1)],1),_vm._v(\" \"),_c('b-col',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isAdmin || _vm.isCompany),expression:\"isAdmin || isCompany\"}],attrs:{\"md\":\"12\"}},[_c('b-list-group',[_c('b-list-group-item',{staticClass:\"d-flex justify-content-center\",attrs:{\"variant\":\"secondary\"}},[_c('div',{staticClass:\"font-weight-bold font-lg\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"message.download_clients\"))+\" \")])]),_vm._v(\" \"),_c('b-list-group-item',{staticClass:\"d-flex justify-content-between align-items-center\",attrs:{\"button\":\"\"}},[_c('b-input-group',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isAdmin),expression:\"isAdmin\"}],staticClass:\"mb-12\"},[_c('b-input-group-prepend',[_c('b-input-group-text',[_c('i',{staticClass:\"icon-grid\"})])],1),_vm._v(\" \"),_c('b-form-select',{attrs:{\"options\":_vm.companies,\"value-field\":\"id\",\"text-field\":\"name\"},model:{value:(_vm.idCompany),callback:function ($$v) {_vm.idCompany=$$v},expression:\"idCompany\"}},[_c('template',{slot:\"first\"},[_c('option',{domProps:{\"value\":null}},[_vm._v(_vm._s(_vm.$t('message.seleccion_compania')))])])],2)],1),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.idCompany != null),expression:\"idCompany != null\"}],staticClass:\"mb-12\"},[_vm._v(\"\\n              \"+_vm._s(_vm.$t('message.clients'))+\"\\n             \"),_c('download-excel',{attrs:{\"fields\":_vm.json_fields_clients,\"fetch\":_vm.exportClients,\"name\":_vm.exportFileNames.clients}},[_c('a',{attrs:{\"href\":\"#\"}},[_c('i',{staticClass:\"fa fa-download fa-lg mt-4\"})])])],1)],1)],1)],1)],1),_vm._v(\" \"),_c('b-row',{attrs:{\"fluid\":\"\"}},[_c('b-col',{attrs:{\"md\":\"12\"}},[_c('b-list-group',[_c('b-list-group-item',{staticClass:\"d-flex justify-content-center\",attrs:{\"variant\":\"secondary\"}},[_c('div',{staticClass:\"font-weight-bold font-lg\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"message.download_answers_data\"))+\" \")])])],1),_vm._v(\" \"),_c('b-list-group',[_c('b-list-group-item',{staticClass:\"d-flex justify-content-between align-items-center\",attrs:{\"button\":\"\"}},[_c('b-row',[_c('b-col',{attrs:{\"md\":\"12\"}},[_c('b-input-group',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isAdmin || _vm.isCompany),expression:\"isAdmin || isCompany\"}],staticClass:\"mb-12\"},[_c('b-input-group-prepend',[_c('b-input-group-text',[_c('i',{staticClass:\"icon-grid\"})])],1),_vm._v(\" \"),_c('b-form-select',{attrs:{\"options\":_vm.clients,\"value-field\":\"id\",\"text-field\":\"client_company_name\"},on:{\"change\":_vm.refresh},model:{value:(_vm.idClient),callback:function ($$v) {_vm.idClient=$$v},expression:\"idClient\"}},[_c('template',{slot:\"first\"},[_c('option',{domProps:{\"value\":null}},[_vm._v(_vm._s(_vm.$t('message.seleccion_cliente')))])])],2)],1)],1),_vm._v(\" \"),_c('b-col',{attrs:{\"md\":\"12\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.idClient != null),expression:\"idClient != null\"}]},[_vm._v(\"\\n                \"+_vm._s(_vm.$t('message.download_answers_by_client_id'))+\"\\n                \"),_c('download-excel',{attrs:{\"fetch\":_vm.exportResponses,\"fields\":_vm.json_fields_responses,\"name\":_vm.exportFileNames.responses}},[_c('a',{attrs:{\"href\":\"#\"}},[_c('i',{staticClass:\"fa fa-download fa-lg mt-4\"})])])],1)])],1)],1),_vm._v(\" \"),_c('b-list-group-item',{staticClass:\"d-flex justify-content-between align-items-center\",attrs:{\"button\":\"\"}},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isAdmin),expression:\"isAdmin\"}]},[_vm._v(\"\\n            \"+_vm._s(_vm.$t(\"message.all\"))+\"\\n            \"),_c('download-excel',{attrs:{\"fetch\":_vm.exportResponses,\"fields\":_vm.json_fields_responses,\"name\":_vm.exportFileNames.responses}},[_c('a',{attrs:{\"href\":\"#\"}},[_c('i',{staticClass:\"fa fa-download fa-lg mt-4\"})])])],1)])],1)],1)],1)],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1f106748\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/ExportResults.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}