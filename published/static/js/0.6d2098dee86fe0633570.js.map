{"version":3,"sources":["webpack:///src/components/BusinessLogic/ClientSelector.vue","webpack:///./src/components/BusinessLogic/ClientSelector.vue","webpack:///./src/components/BusinessLogic/ClientSelector.vue?e33f"],"names":["ClientSelector","name","components","data","idClient","clients_by_company","companies","idCompany","mounted","_this","this","asyncToGenerator_default","regenerator_default","a","mark","_callee","dataConsult","wrap","_context","prev","next","isCompany","currentUser","company_id","isClient","isAdmin","consult","_BDData","endPoints","urlClients","sent","stop","methods","path","_this2","method","arguments","length","undefined","_callee2","response","_context2","$store","commit","mutations_type","api","post","getAll","abrupt","t0","console","error","stringify_default","message","changeClient","value","$emit","changeCompany","_this3","_callee3","_context3","computed","extends_default","showSelector","Object","vuex_esm","Component","component_normalizer","_vm","_h","$createElement","_c","_self","attrs","no-body","directives","rawName","expression","staticClass","md","_v","label","$t","label-for","label-cols","horizontal","id","options","required","value-field","text-field","on","change","model","callback","$$v","slot","domProps","_s","__webpack_exports__"],"mappings":"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","file":"static/js/0.6d2098dee86fe0633570.js","sourcesContent":["<template>\r\n  <div>\r\n  <b-card :no-body=\"true\">\r\n    <!-- El selector de companias esta disponible solo para adminstradores -->\r\n    <b-card-body class=\"p-3 clearfix\" v-show=\"isAdmin\">\r\n      <b-row>\r\n        <b-col md=\"1\" class=\"text-center\">\r\n          <i class=\"fa icon-grid bg-dark text-white p-3 font-2xl mr-1 \"></i>\r\n        </b-col>\r\n        <b-col md=\"11\">\r\n            <div class=\"h5 text-dark mb-0 mt-2\">\r\n            <b-form-group :label=\"$t('message.compania')\" label-for=\"companyInput\" :label-cols=\"1\"\r\n              :horizontal=\"true\" >\r\n              <b-form-select id=\"companyInput\" v-model=\"idCompany\" :options=\"companies\"  @change=\"changeCompany\" required value-field=\"id\" text-field=\"name\">\r\n                <template slot=\"first\">\r\n                <option :value=\"null\">{{$t('message.seleccion_compania')}}</option>\r\n                </template>\r\n              </b-form-select>\r\n              </b-form-group>\r\n            </div>\r\n        </b-col>\r\n      </b-row>\r\n    </b-card-body>\r\n    <b-card-body class=\"p-3 clearfix\" v-show=\"showSelector\">\r\n      <b-row>\r\n        <b-col md=\"1\" class=\"text-center\">\r\n          <i class=\"fa icon-user bg-dark text-white p-3 font-2xl mr-1 \"></i>\r\n        </b-col>\r\n        <b-col md=\"11\">\r\n            <div class=\"h5 text-dark mb-0 mt-2\">\r\n            <b-form-group :label=\"$t('message.cliente')\" label-for=\"clientInput\" :label-cols=\"1\"\r\n              :horizontal=\"true\" >\r\n              <b-form-select id=\"clientInput\" v-model=\"idClient\" :options=\"clients_by_company\"  @change=\"changeClient\" required>\r\n                <template slot=\"first\">\r\n                <option :value=\"null\">{{$t('message.seleccion_cliente')}}</option>\r\n            </template>\r\n              </b-form-select>\r\n              </b-form-group>\r\n            </div>\r\n        </b-col>\r\n      </b-row>\r\n    </b-card-body>\r\n  </b-card>\r\n  </div>\r\n</template>\r\n<script>\r\nimport api from '@/services/api.js'\r\nimport BDData from '@/common/_BDData.js'\r\nimport { mapGetters } from 'vuex'\r\nimport { SET_LOADING, SET_ERROR } from '@/store/mutations.type'\r\n\r\nexport default {\r\n  name: 'client-selector',\r\n  components: {\r\n  },\r\n  data () {\r\n    return {\r\n      idClient: null, // Controla para que cliente ser hará la consulta de los datos\r\n      clients_by_company: [],\r\n      companies: [],\r\n      idCompany: null\r\n    }\r\n  },\r\n  async mounted () {\r\n    if (this.isCompany) {\r\n      // Se asigna el id de la compañía segun el perfil del usuario autenticado que se consulta en el store\r\n      this.idCompany = this.currentUser.company_id\r\n      let dataConsult = {}\r\n      dataConsult.idCompany = this.currentUser.company_id\r\n      dataConsult.isClient = this.isClient // tomado del store\r\n      dataConsult.isAdmin = this.isAdmin // tomado del store\r\n      dataConsult.isCompany = this.isCompany // tomado del store\r\n      this.clients_by_company = await this.consult(dataConsult, BDData.endPoints.urlClients, 'post')\r\n    }\r\n    if (this.isAdmin) {\r\n      // Se consultan la lista de compañias\r\n      this.companies = await this.consult({}, BDData.endPoints.companies, 'get')\r\n    }\r\n    // No se pone para clientes pq los clientes no deberian ver este componente\r\n  },\r\n  methods: {\r\n    async consult (data, path, method = 'post') {\r\n      try {\r\n        var response = null\r\n        this.$store.commit(SET_LOADING, true)\r\n        if (method === 'post') {\r\n          response = await api.post(data, path)\r\n        } else if (method === 'get') {\r\n          response = await api.getAll(path)\r\n        }\r\n        // Estuvo exitosa la busqueda\r\n        this.$store.commit(SET_LOADING, false)\r\n        return response.data\r\n      } catch (exception) {\r\n        console.error(JSON.stringify(exception.message))\r\n        this.$store.commit(SET_ERROR, exception.message)\r\n        this.$store.commit(SET_LOADING, false)\r\n      }\r\n    },\r\n    changeClient: function (value) {\r\n      // Se emite del cambio al componente padre\r\n      this.$emit('client-selector:change', value)\r\n    },\r\n    async changeCompany (value) {\r\n      if (value === null) {\r\n        this.clients_by_company = []\r\n      } else {\r\n        // Se consultan nuevamente los clientes pero de la compañía seleccionada por el usuairo administrador\r\n        let dataConsult = {}\r\n        dataConsult.idCompany = value\r\n        dataConsult.isClient = this.isClient // tomado del store\r\n        dataConsult.isAdmin = this.isAdmin // tomado del store\r\n        dataConsult.isCompany = this.isCompany // tomado del store\r\n        this.clients_by_company = await this.consult(dataConsult, BDData.endPoints.urlClients)\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    showSelector: function () {\r\n      // El selector se muestra si es adminstrador o si es compañia\r\n      // profile sale del store\r\n      if (this.isAdmin || this.isCompany) {\r\n        return true\r\n      } else {\r\n        return false\r\n      }\r\n    },\r\n    ...mapGetters(['profile', 'isAdmin', 'isClient', 'currentUser', 'isCompany']) // Trae los getters\r\n  }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/BusinessLogic/ClientSelector.vue","/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ClientSelector.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ClientSelector.vue\"\n/* template */\nimport {render as __vue_render__, staticRenderFns as __vue_static_render_fns__} from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2c440ebc\\\",\\\"hasScoped\\\":false,\\\"optionsId\\\":\\\"0\\\",\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ClientSelector.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nimport normalizeComponent from \"!../../../node_modules/vue-loader/lib/runtime/component-normalizer\"\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_render__,\n  __vue_static_render_fns__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/BusinessLogic/ClientSelector.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('b-card',{attrs:{\"no-body\":true}},[_c('b-card-body',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isAdmin),expression:\"isAdmin\"}],staticClass:\"p-3 clearfix\"},[_c('b-row',[_c('b-col',{staticClass:\"text-center\",attrs:{\"md\":\"1\"}},[_c('i',{staticClass:\"fa icon-grid bg-dark text-white p-3 font-2xl mr-1 \"})]),_vm._v(\" \"),_c('b-col',{attrs:{\"md\":\"11\"}},[_c('div',{staticClass:\"h5 text-dark mb-0 mt-2\"},[_c('b-form-group',{attrs:{\"label\":_vm.$t('message.compania'),\"label-for\":\"companyInput\",\"label-cols\":1,\"horizontal\":true}},[_c('b-form-select',{attrs:{\"id\":\"companyInput\",\"options\":_vm.companies,\"required\":\"\",\"value-field\":\"id\",\"text-field\":\"name\"},on:{\"change\":_vm.changeCompany},model:{value:(_vm.idCompany),callback:function ($$v) {_vm.idCompany=$$v},expression:\"idCompany\"}},[_c('template',{slot:\"first\"},[_c('option',{domProps:{\"value\":null}},[_vm._v(_vm._s(_vm.$t('message.seleccion_compania')))])])],2)],1)],1)])],1)],1),_vm._v(\" \"),_c('b-card-body',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showSelector),expression:\"showSelector\"}],staticClass:\"p-3 clearfix\"},[_c('b-row',[_c('b-col',{staticClass:\"text-center\",attrs:{\"md\":\"1\"}},[_c('i',{staticClass:\"fa icon-user bg-dark text-white p-3 font-2xl mr-1 \"})]),_vm._v(\" \"),_c('b-col',{attrs:{\"md\":\"11\"}},[_c('div',{staticClass:\"h5 text-dark mb-0 mt-2\"},[_c('b-form-group',{attrs:{\"label\":_vm.$t('message.cliente'),\"label-for\":\"clientInput\",\"label-cols\":1,\"horizontal\":true}},[_c('b-form-select',{attrs:{\"id\":\"clientInput\",\"options\":_vm.clients_by_company,\"required\":\"\"},on:{\"change\":_vm.changeClient},model:{value:(_vm.idClient),callback:function ($$v) {_vm.idClient=$$v},expression:\"idClient\"}},[_c('template',{slot:\"first\"},[_c('option',{domProps:{\"value\":null}},[_vm._v(_vm._s(_vm.$t('message.seleccion_cliente')))])])],2)],1)],1)])],1)],1)],1)],1)}\nvar staticRenderFns = []\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2c440ebc\",\"hasScoped\":false,\"optionsId\":\"0\",\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/BusinessLogic/ClientSelector.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}